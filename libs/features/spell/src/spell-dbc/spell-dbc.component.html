<keira-top-bar [selected]="handlerService.selected" [selectedName]="handlerService.selectedName" [isNew]="handlerService.isNew" />

<div class="container-fluid">
  @if (editorService.loading) {
    <span [translate]="'LOADING'"></span>
  }

  <div [hidden]="!editorService.form || !editorService.loadedEntityId || editorService.loading">
    <div class="content-block">
      <keira-query-output
        [docUrl]="docUrl"
        [isNew]="editorService.isNew"
        [diffQuery]="editorService.diffQuery"
        [fullQuery]="editorService.fullQuery"
        [error]="editorService.error"
        [entityTable]="editorService.entityTable"
        [editorService]="editorService"
        (executeQuery)="save($event)"
      />
    </div>

    <div class="content-block">
      <tabset id="spell-dbc-tabset">
        <tab heading="Base" id="Base">
          <keira-spell-dbc-base [formGroup]="editorService.form" />
        </tab>
        <tab heading="Effects" id="Effects">
          <keira-spell-dbc-effects [formGroup]="editorService.form" />
        </tab>
        <tab heading="Items" id="Items">
          <keira-spell-dbc-items [formGroup]="editorService.form" />
        </tab>
        <tab heading="Flags" id="Flags">
          <keira-spell-dbc-flags [formGroup]="editorService.form" />
        </tab>
        <tab heading="Texts" id="Texts">
          <keira-spell-dbc-texts [formGroup]="editorService.form" />
        </tab>
        <tab heading="Misc" id="Misc">
          <keira-spell-dbc-misc [formGroup]="editorService.form" />
        </tab>
      </tabset>
    </div>
  </div>
</div>
